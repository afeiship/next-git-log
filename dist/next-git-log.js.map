{"version":3,"sources":["next-git-log.js"],"names":[],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"next-git-log.js","sourcesContent":["(function () {\n  var global = global || this || window || Function('return this')();\n  var nx = global.nx || require('@feizheng/next-js-core2');\n  var tmpl = nx.tmpl || require('@feizheng/next-tmpl');\n  var exec = require('child_process').exec;\n  var execSync = require('child_process').execSync;\n  var today = new Date().toISOString().slice(0, 10);\n  var DEFAULT_OPTIONS = {\n    pretty: \"%h - %s\",\n    since: '2020-05-01',\n    before: today,\n    suffix: '',\n    async: true,\n    debug: false\n  }\n\n  nx.gitLog = function (inOptions) {\n    var options = nx.mix(null, DEFAULT_OPTIONS, inOptions);\n    var templates = [\n      'git log',\n      options.pretty && '--pretty=\"{pretty}\"',\n      options.since && '--since=\"{since}\"',\n      options.before && '--before=\"{before}\"',\n      options.suffix && '{suffix}',\n    ].filter(Boolean).join(' ');\n\n    var cmds = tmpl(templates, options);\n\n    options.debug && console.log('[ debug ]: ', cmds);\n\n    if (options.async) {\n      return new Promise(function (resolve, reject) {\n        exec(cmds, function (error, stdout) {\n          if (error) return reject(error)\n          resolve(stdout.trim());\n        });\n      })\n    }\n\n    return execSync(cmds).toString().trim();\n  };\n\n  if (typeof module !== 'undefined' && module.exports) {\n    module.exports = nx.gitLog;\n  }\n})();\n"]}